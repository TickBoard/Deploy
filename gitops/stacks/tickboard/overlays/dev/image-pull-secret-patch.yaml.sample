apiVersion: apps/v1
kind: Deployment
metadata:
  name: gin-api
  namespace: tickboard
spec:
  template:
    spec:
      imagePullSecrets:
        - name: harbor-pull-secret
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: frontend
  namespace: tickboard
spec:
  template:
    spec:
      imagePullSecrets:
        - name: harbor-pull-secret

# Usage:
# 1) Create the secret in the target namespace (tickboard):
#    kubectl -n tickboard create secret docker-registry harbor-pull-secret \
#      --docker-server=harbor.czhuang.dev \
#      --docker-username=robot$your-user \
#      --docker-password=xxxxx \
#      --docker-email=you@example.com
# 2) Preferred: use the default ServiceAccount patch (already included by this overlay):
#    - See `serviceaccount-patch.yaml` which adds `imagePullSecrets` to the default SA.
#
#    Alternatively, to patch each Deployment directly, rename this file to
#    `image-pull-secret-patch.yaml` and reference it in `kustomization.yaml` under `patches`:
#      patches:
#        - path: image-pull-secret-patch.yaml
